{"version":3,"file":"browser.js","sources":["src/Event.js","src/EventEmitter.js","index.js"],"sourcesContent":["const returnTrue = function() {\n    return true;\n};\n\nconst returnFalse = function() {\n    return false;\n};\n\nclass Event {\n\n    /**\n     * @param {*} target\n     * @param {String} type\n     * @param {Array} args\n     */\n    constructor(target, type, args) {\n        Object.defineProperties(this, {\n            'target': {\n                get       : function() {\n                    return target;\n                },\n                set       : function(value) {\n                },\n                enumerable: true\n            },\n            'type'  : {\n                get       : function() {\n                    return type;\n                },\n                set       : function(value) {\n                },\n                enumerable: true\n            },\n            'args'  : {\n                get       : function() {\n                    return args;\n                },\n                set       : function(value) {\n                },\n                enumerable: true\n            }\n        });\n\n        this.isDefaultPrevented = returnFalse;\n        this.isPropagationStopped = returnFalse;\n    }\n\n    preventDefault() {\n        this.isDefaultPrevented = returnTrue;\n    }\n\n    stopPropagation() {\n        this.isPropagationStopped = returnTrue;\n    }\n\n}\n\nmodule.exports = Event;\n","const Event = require('./Event');\n\n/**\n * @typedef {Object.<String, Function>} Callbacks\n */\n\nclass EventEmitter {\n\n    /**\n     * Add one or many event handlers\n     *\n     * @example\n     *  obj.on('event', callback)\n     *  obj.on('event', listener) // listener has an `handleEvent` method\n     *  obj.on('event1 event2', callback)\n     *  obj.on({ event1: callback1, event2: callback2 })\n     *\n     * @param {String|Callbacks} events\n     * @param {Function} [callback]\n     * @return {this}\n     */\n    on(events, callback) {\n        this.__events = this.__events || {};\n\n        if (typeof events === 'object') {\n            for (const event in events) {\n                if (events.hasOwnProperty(event)) {\n                    this.__events[event] = this.__events[event] || [];\n                    this.__events[event].push(events[event]);\n                }\n            }\n        }\n        else {\n            events.split(' ').forEach(function(event) {\n                this.__events[event] = this.__events[event] || [];\n                this.__events[event].push(callback);\n            }, this);\n        }\n\n        return this;\n    }\n\n    /**\n     * Remove one or many or all event handlers\n     *\n     * @example\n     *  obj.off('event')\n     *  obj.off('event', callback)\n     *  obj.off('event1 event2')\n     *  obj.off({ event1: callback1, event2: callback2 })\n     *  obj.off()\n     *\n     * @param {String|Callbacks} [events]\n     * @param {Function} [callback]\n     * @return {this}\n     */\n    off(events, callback) {\n        this.__events = this.__events || {};\n\n        if (typeof events === 'object') {\n            for (const event in events) {\n                if (events.hasOwnProperty(event) && (event in this.__events)) {\n                    const index = this.__events[event].indexOf(events[event]);\n                    if (index !== -1) this.__events[event].splice(index, 1);\n                }\n            }\n        }\n        else if (!!events) {\n            events.split(' ').forEach(function(event) {\n                if (event in this.__events) {\n                    if (callback) {\n                        const index = this.__events[event].indexOf(callback);\n                        if (index !== -1) this.__events[event].splice(index, 1);\n                    }\n                    else {\n                        this.__events[event].length = 0;\n                    }\n                }\n            }, this);\n        }\n        else {\n            this.__events = {};\n        }\n\n        return this;\n    }\n\n    /**\n     * Add one or many event handlers that will be called only once\n     * This handlers are only applicable to \"trigger\", not \"change\"\n     *\n     * @example\n     *  obj.once('event', callback)\n     *  obj.once('event1 event2', callback)\n     *  obj.once({ event1: callback1, event2: callback2 })\n     *\n     * @param {String|Callbacks} events\n     * @param {Function} [callback]\n     * @return {this}\n     */\n    once(events, callback) {\n        this.__once = this.__once || {};\n\n        if (typeof events === 'object') {\n            for (const event in events) {\n                if (events.hasOwnProperty(event)) {\n                    this.__once[event] = this.__once[event] || [];\n                    this.__once[event].push(events[event]);\n                }\n            }\n        }\n        else {\n            events.split(' ').forEach(function(event) {\n                this.__once[event] = this.__once[event] || [];\n                this.__once[event].push(callback);\n            }, this);\n        }\n\n        return this;\n    }\n\n    /**\n     * Trigger all handlers for an event\n     *\n     * @param {String} event\n     * @param {*...} [arguments]\n     * @return {Event}\n     */\n    trigger(event /* , args... */) {\n        const args = Array.prototype.slice.call(arguments, 1);\n        const e = new Event(this, event, args);\n\n        if (this.__events && event in this.__events) {\n            for (let i = 0, l = this.__events[event].length; i < l; i++) {\n                let f = this.__events[event][i];\n                if (typeof f === 'object') {\n                    f.handleEvent(e);\n                }\n                else {\n                    f.call(this, e, ...args);\n                }\n\n                if (e.isPropagationStopped()) {\n                    return e;\n                }\n            }\n        }\n\n        if (this.__once && event in this.__once) {\n            for (let i = 0, l = this.__once[event].length; i < l; i++) {\n                const f = this.__once[event][i];\n                if (typeof f === 'object') {\n                    f.handleEvent(e);\n                }\n                else {\n                    f.call(this, e, ...args);\n                }\n\n                if (e.isPropagationStopped()) {\n                    delete this.__once[event];\n                    return e;\n                }\n            }\n            delete this.__once[event];\n        }\n\n        return e;\n    }\n\n    /**\n     * Trigger all modificators for an event, each handler must return a value\n     *\n     * @param {String} event\n     * @param {*} value\n     * @param {*...} [arguments]\n     * @return {*} modified value\n     */\n    change(event, value /* , args... */) {\n        const args = Array.prototype.slice.call(arguments, 2);\n        const e = new Event(this, event, args);\n        e.value = value;\n\n        if (this.__events && event in this.__events) {\n            for (let i = 0, l = this.__events[event].length; i < l; i++) {\n                const f = this.__events[event][i];\n                if (typeof f === 'object') {\n                    e.value = f.handleEvent(e);\n                }\n                else {\n                    e.value = f.call(this, e, e.value, ...args);\n                }\n\n                if (e.isPropagationStopped()) {\n                    return e.value;\n                }\n            }\n        }\n\n        return e.value;\n    }\n\n}\n\nmodule.exports = EventEmitter;\n","const EventEmitter = require('./src/EventEmitter');\n\nfunction mixin(target) {\n    target = typeof target === 'function' ? target.prototype : target;\n\n    ['on', 'off', 'once', 'trigger', 'change'].forEach(function(name) {\n        target[name] = EventEmitter.prototype[name];\n    });\n\n    Object.defineProperties(target, {\n        '__events': {\n            value   : null,\n            writable: true\n        },\n        '__once'  : {\n            value   : null,\n            writable: true\n        }\n    });\n}\n\nmodule.exports = {\n    EventEmitter: EventEmitter,\n    mixin       : mixin,\n};\n"],"names":["returnTrue","returnFalse","Event","target","type","args","Object","defineProperties","get","set","value","enumerable","isDefaultPrevented","isPropagationStopped","preventDefault","stopPropagation","EventEmitter","on","events","callback","__events","event","hasOwnProperty","push","split","forEach","off","index","indexOf","splice","length","once","__once","trigger","Array","prototype","slice","call","arguments","e","i","l","f","handleEvent","change","mixin","name","writable"],"mappings":"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"}